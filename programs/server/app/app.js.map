{"version":3,"sources":["meteor://ðŸ’»app/lib/collections/alarm_device.js","meteor://ðŸ’»app/lib/collections/battery_parsed.js","meteor://ðŸ’»app/lib/collections/dashboard_temp_graph.js","meteor://ðŸ’»app/lib/collections/dashboard_tx_graph.js","meteor://ðŸ’»app/lib/collections/list_active_device.js","meteor://ðŸ’»app/lib/collections/list_camera.js","meteor://ðŸ’»app/lib/collections/m_device.js","meteor://ðŸ’»app/lib/collections/m_device_category.js","meteor://ðŸ’»app/lib/collections/m_protocol.js","meteor://ðŸ’»app/lib/collections/m_province.js","meteor://ðŸ’»app/lib/collections/m_region.js","meteor://ðŸ’»app/lib/collections/scope.js","meteor://ðŸ’»app/lib/collections/site.js","meteor://ðŸ’»app/lib/collections/site_device.js","meteor://ðŸ’»app/lib/collections/site_device_sensor.js","meteor://ðŸ’»app/lib/collections/site_status_link.js","meteor://ðŸ’»app/lib/collections/sitelog.js","meteor://ðŸ’»app/lib/collections/users.js","meteor://ðŸ’»app/lib/routes/hooks.js","meteor://ðŸ’»app/lib/routes/routes-authenticated.js","meteor://ðŸ’»app/lib/routes/routes-global.js","meteor://ðŸ’»app/lib/routes/routes-public.js","meteor://ðŸ’»app/server/admin/set-account.js","meteor://ðŸ’»app/server/admin/startup.js","meteor://ðŸ’»app/server/admin/subscription.js","meteor://ðŸ’»app/server/api/serveImage.js","meteor://ðŸ’»app/server/policy.js","meteor://ðŸ’»app/server/server.js"],"names":["alarm_device","Mongo","Collection","featured","find","battery_parsed","dashboard_temp_graph","dashboard_tx_graph","active_device","list_camera","m_device","fields","_id","name","description","icon","device_category_id","position","m_device_category","m_protocol","m_province","region_id","m_region","scope","site","site_id","status","sort","site_device","obj","dev_id","device_id","title","title2","site_device_sensor","protocol_id","sensor_name","is_show","unit","value_min","value_max","major_min","major_max","limit_min","limit_max","sensor_view","valueNow","persent","colour","condition","status_link","sitelog","sitedev","count","data","_","each","fetch","row","push","result","index","length","el","includes","d","findOne","console","log","args","limit","checkUserLoggedIn","Meteor","loggingIn","user","Router","go","next","userAuthenticated","onBeforeAction","except","only","PostSubs","SubsManager","route","render","to","loadingTemplate","Session","set","waitOn","subscribe","fastRender","isClient","sesData","get","ObjectID","configure","notFoundTemplate","layoutTemplate","generateTestAccounts","users","email","password","i","userEmail","checkUser","Accounts","createUser","username","profile","startup","publish","module","export","imageServe","watch","require","v","express","default","bodyParser","app","use","urlencoded","extended","static","WebApp","connectHandlers","BrowserPolicy","content","allowOriginForAll","Markers","req","res","setHeader","isServer"],"mappings":"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;AACAD,YAAQC,GAAR,CAAY,cAAZ,EAA4B,aAA5B;AACA,SAAKZ,IAAL;AACH,GAPH;AAQEa,UAAS,YAAU;AACf,WAAO,CACf;AACYR,aAASS,SAAT,CAAmB,iBAAnB,CAFG,EAGHT,SAASS,SAAT,CAAmB,kBAAnB,CAHG,EAIHT,SAASS,SAAT,CAAmB,gBAAnB,CAJG,EAKHT,SAASS,SAAT,CAAmB,yBAAnB,CALG,EAMHT,SAASS,SAAT,CAAmB,kBAAnB,CANG,EAOHT,SAASS,SAAT,CAAmB,oBAAnB,CAPG,EAQHnB,OAAOmB,SAAP,CAAiB,uBAAjB,CARG,EASHnB,OAAOmB,SAAP,CAAiB,6BAAjB,CATG,CAAP;AAaH,GAtBH;AAuBErC,QAAO,YAAU;AACb,QAAGkB,OAAOqB,QAAV,EAAoB;AAClBC,gBAAUN,QAAQO,GAAR,CAAY,QAAZ,CAAV;AACD,KAHY,CAIrB;;;AACQ,WAAOvE,KAAK0C,OAAL,CAAa;AAAEtD,WAAM,IAAIX,MAAM+F,QAAV,CAAoBF,OAApB;AAAR,KAAb,CAAP;AACH,GA7BH;AA8BEF,cAAY;AA9Bd,CALF,E,CAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,M;;;;;;;;;;;AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAjB,OAAOsB,SAAP,CAAiB;AACbV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","file":"/app.js","sourcesContent":["alarm_device = new Mongo.Collection('nms_alarm_device');\n\nalarm_device.featured = function() {\n  return alarm_device.find();\n}","battery_parsed = new Mongo.Collection(\"nms_battery_parsed\");\n\nbattery_parsed.featured = function(){\n    return battery_parsed.find();\n}\n","dashboard_temp_graph = new Mongo.Collection('nms_dashboard_temp_graph');\n\ndashboard_temp_graph.featured = function() {\n  return dashboard_temp_graph.find();\n}","dashboard_tx_graph = new Mongo.Collection('nms_dashboard_tx_graph');\n\ndashboard_tx_graph.featured = function() {\n  return dashboard_tx_graph.find();\n}","active_device = new Mongo.Collection('nms_list_active_device');\n\nactive_device.featured = function() {\n  return active_device.find();\n}","// list_camera = new Mongo.Collection('nms_list_camera');\nlist_camera = new Mongo.Collection('nms_show_camera');\n\nlist_camera.featured = function() {\n  return list_camera.find({});\n}\n","m_device = new Mongo.Collection(\"nms_m_device\");\n\nm_device.featured = function(){\n    return m_device.find({}, {fields: {_id: 1, name: 1, description: 1, icon: 1, device_category_id: 1, position: 1}});\n}\n","m_device_category = new Mongo.Collection(\"nms_m_device_category\");\n\nm_device_category.featured = function(){\n    return m_device_category.find({}, {fields: {_id: 1, name: 1}});\n}\n","m_protocol = new Mongo.Collection(\"nms_m_protocol\");\n\nm_protocol.featured = function() {\n    return m_protocol.find();\n}\n","m_province = new Mongo.Collection(\"nms_m_province\");\n\nm_province.featured = function(){\n    return m_province.find({}, { fields: {_id: 1, name: 1, region_id: 1} });\n}\n","m_region = new Mongo.Collection(\"nms_m_region\");\n\nm_region.featured = function(){\n    return m_region.find({}, {fields: {_id: 1, name: 1}});\n}\n","scope = new Mongo.Collection(\"nms_scope\");\n\nscope.featured = function(){\n    return scope.find({});\n    // var site = Sites.findOne();\n    // return [\n    //     Sites.find({}),\n    //\n    // ]\n}\n\n\n// var featuredSkus = [\"honeymoon-mars\",\"johnny-liftoff\",\"one-way-reentry\"];\n// return Products.find({sku : {$in : featuredSkus}},\n//     {fields : {inventory : false, cost : false}}\n// )\n","site = new Mongo.Collection(\"nms_site\");\n\nsite.featured = function(){\n    return site.find({}, {fields: {_id: 1, name: 1, region_id: 1, site_id: 1, status: 1}, sort: {name: 1} });\n    // var site = Sites.findOne();\n    // return [\n    //     Sites.find({}),\n    //\n    // ]\n}\n\n// site.completed = function(args){\n//     let site_id = new Mongo.ObjectID(args);\n//     var data_site = site.find({ _id : new Mongo.ObjectID(args) });\n//     // console.log(site.find({ _id : new Mongo.ObjectID(args) }));\n//     // var siteData = [];\n//     _.each(data_site.fetch(), function(row){\n//         // siteData.push(row);\n//         let data_site_device = site_device.find({site_id : site_id});\n//         // var siteDevData = [];\n//         _.each(data_site_device.fetch(), function(rowSite){\n//             // siteData[\"site_device\"] = siteDevData.push();\n//             // row.push({\"site_device\" : rowSite});\n//             console.log(rowSite);\n//         })\n//     })\n//\n//     // return siteData;\n// }\n\n//\n// site.findOne = function(args){\n//     return _.find(site, function(row){\n//         return row._id === args._id;\n//     })\n// }\n\n\n// var featuredSkus = [\"honeymoon-mars\",\"johnny-liftoff\",\"one-way-reentry\"];\n// return Products.find({sku : {$in : featuredSkus}},\n//     {fields : {inventory : false, cost : false}}\n// )\n","site_device = new Mongo.Collection(\"nms_site_device\");\n\nsite_device.featured = function(obj){\n    return site_device.find({}, {fields: {_id: 1, dev_id: 1, site_id: 1, device_category_id: 1, device_id: 1, title: 1, title2: 1}});\n}\n\n// site_device.aggregated = function(args){\n//     var d = site_device.aggregate([{\n//         $match : {\n//             site_id : new Mongo.ObjectID(\"5b59931c6f97984a0ad8c688\") }\n//         },{\n//         $group : {\n//             _id : \"$device_category_id\" }\n//         }]);\n//\n//     return site_device.aggregate(args);\n// }\n","site_device_sensor = new Mongo.Collection(\"nms_site_device_sensor\");\n\nsite_device_sensor.featured = function(){\n    return site_device_sensor.find({}, {fields: {_id: 1, dev_id: 1, protocol_id: 1, sensor_name: 1, is_show: 1, unit: 1, description: 1, value_min: 1, value_max: 1, major_min: 1, major_max: 1, limit_min: 1, limit_max: 1, sensor_view: 1, valueNow: 1, persent: 1, colour: 1, condition: 1}});\n}\n","status_link = new Mongo.Collection(\"nms_site_status_link\");\n\nstatus_link.featured = function(){\n    return status_link.find({}, {fields: {_id: 1, site: 1, status: 1}});\n}","sitelog = new Mongo.Collection(\"nms_sitelog\");\n\nsitelog.featured = function(){\n//     aktivasi 20180905\n    var sitedev = site_device.find();\n    if(sitedev.count() > 0){\n        var data = [];\n        _.each(sitedev.fetch(), function(row){\n            data.push(row.dev_id);\n        })\n    \n        let result = [];\n        for (let index = 0; index < data.length; index++) {\n            let el = data[index];\n            if (!result.includes(el)) result.push(el);\n        }\n    \n        _.each(result, function(dev_id){\n            // return sitelog.findOne({ dev_id : args.dev_id }, { sort:{ createdOn : -1 } } );\n            // var d = sitelog.findOne({ dev_id : dev_id }, { sort: { createdOn : -1 } } );\n            var d = sitelog.findOne({ dev_id : dev_id }, { sort: { _id : -1 } } );\n            if(typeof d !== 'undefined'){\n                console.log(d);\n            }\n        })\n    }\n//     return sitelog.find();\n//     return sitelog.find({ dev_id : args.dev_id }, { sort:{ createdOn : -1 }, limit : 1 } );\n    return sitelog.find({ dev_id : args.dev_id }, { sort:{ _id : -1 }, limit : 1 } );\n}\n","// Users = new Mongo.Collection(\"users\");\n/*\n* Allow\n*/\n//\n// Meteor.users.allow({\n//   insert: function(){\n//     // Disallow user inserts on the client by default.\n//     return false;\n//   },\n//   update: function(){\n//     // Disallow user updates on the client by default.\n//     return false;\n//   },\n//   remove: function(){\n//     // Disallow user removes on the client by default.\n//     return false;\n//   }\n// });\n//\n// /*\n// * Deny\n// */\n//\n// Meteor.users.deny({\n//   insert: function(){\n//     // Deny user inserts on the client by default.\n//     return true;\n//   },\n//   update: function(){\n//     // Deny user updates on the client by default.\n//     return true;\n//   },\n//   remove: function(){\n//     // Deny user removes on the client by default.\n//     return true;\n//   }\n// });\n","checkUserLoggedIn = function(){\n    if(!Meteor.loggingIn() && !Meteor.user()){\n        Router.go('/login');\n    }else{\n        this.next();\n    }\n}\n\nuserAuthenticated = function(){\n    if(Meteor.loggingIn() && Meteor.user()){\n        Router.go(\"/\");\n    }else{\n        this.next();\n    }\n}\n\n/* Run Hooks */\nRouter.onBeforeAction(checkUserLoggedIn, {\n    except: [\n        'login',\n    ]\n})\n\nRouter.onBeforeAction(userAuthenticated, {\n    only : [\n        'login',\n    ]\n})\n","PostSubs = new SubsManager();\n\nRouter.route(\"/\", function(){\n    this.render('dashboardIndex');\n    this.render('header', {to: 'top'});\n},{\n    name : \"dashboardIndex\",\n    loadingTemplate : \"loading\",\n    onBeforeAction : function(){\n        Session.set('currentRoute', 'dashboardIndex');\n        this.next();\n    },\n    waitOn : function(){\n        return [\n//             Meteor.subscribe(\"featured-sites\"),\n//             Meteor.subscribe(\"featured-sitesDevices\"),\n            Meteor.subscribe(\"featured-activeDevices\"),\n            Meteor.subscribe(\"featured-statusLink\"),\n            Meteor.subscribe(\"featured-alarmDevices\")\n        ];\n    },\n    fastRender: true\n});\n\nRouter.route(\"/report\", function(){\n    this.render('reportIndex');\n    this.render('header', {to: 'top'});\n    this.render('sidebar', {to: 'sidebar-menu'});\n    this.render('siteIndex', {to: 'content'});\n},{\n    name : \"reportIndex\",\n    loadingTemplate : \"loading\",\n    onBeforeAction: function(){\n        Session.set('mySite', 'report');\n        Session.set('currentRoute', 'reportIndex');\n        this.next();\n    },\n    waitOn : function(){\n        return [\n//             Meteor.subscribe(\"featured-scopes\"),\n            PostSubs.subscribe(\"featured-scopes\"),\n            PostSubs.subscribe(\"featured-regions\"),\n            PostSubs.subscribe(\"featured-sites\"),\n            PostSubs.subscribe(\"featured-deviceCategory\"),\n            PostSubs.subscribe(\"featured-devices\"),\n            PostSubs.subscribe(\"featured-protocols\"),\n            Meteor.subscribe(\"featured-sitesDevices\"),\n            Meteor.subscribe(\"featured-sitesDeviceSensors\"),\n//             Meteor.subscribe(\"featured-battery-parsed\"),\n//             Meteor.subscribe(\"featured-listCamera\")\n        ];\n    },\n    data : function(){\n        if(Meteor.isClient) {\n          sesData = Session.get(\"siteId\");\n        }\n//         return site.findOne({ _id : new Mongo.ObjectID( Session.get(\"siteId\") )});\n        return site.findOne({ _id : new Mongo.ObjectID( sesData )});\n    },\n    fastRender: true\n});\n\n// Router.route(\"/topology\", function(){\n//     this.render('topologyIndex');\n//     this.render('header', {to: 'top'});\n//     this.render('sidebarTopo', {to: 'sidebar-menu'});\n//     this.render('siteIndex', {to: 'content'});\n// },{\n//     name : \"topologyIndex\",\n//     loadingTemplate : \"loading\",\n//     onBeforeAction: function(){\n//         Session.set('mySite', 'topology');\n//         Session.set('currentRoute', 'topologyIndex');\n//         this.next();\n//     },\n//     waitOn : function(){\n//         return [\n// //             Meteor.subscribe(\"featured-scopes\"),\n//             PostSubs.subscribe(\"featured-scopes\"),\n//             PostSubs.subscribe(\"featured-regions\"),\n//             PostSubs.subscribe(\"featured-sites\"),\n//             PostSubs.subscribe(\"featured-deviceCategory\"),\n//             PostSubs.subscribe(\"featured-devices\"),\n//             PostSubs.subscribe(\"featured-protocols\"),\n//             Meteor.subscribe(\"featured-sitesDevices\"),\n//             Meteor.subscribe(\"featured-sitesDeviceSensors\"),\n// //             Meteor.subscribe(\"featured-battery-parsed\"),\n// //             Meteor.subscribe(\"featured-listCamera\")\n//         ];\n//     },\n//     data : function(){\n//         if(Meteor.isClient) {\n//           sesData = Session.get(\"siteId\");\n//         }\n// //         return site.findOne({ _id : new Mongo.ObjectID( Session.get(\"siteId\") )});\n//         return site.findOne({ _id : new Mongo.ObjectID( sesData )});\n//     },\n//     fastRender: true\n// });\n\n//\n// Router.route(\"/report/:_id\", function(){\n//     this.render('reportIndex');\n//     this.render('header', {to: 'top'});\n//     this.render('sidebar', {to: 'sidebar-menu'});\n//     this.render('siteIndex', {to: 'content'});\n// },{\n//     name : \"siteReport\",\n//     loadingTemplate : \"loading\",\n//     onBeforeAction: function(){\n//         Session.set('currentRoute', 'reportIndex');\n//         Session.set('site_id', this.params._id);\n//         this.next();\n//     },\n//     waitOn : function(){\n//         return [\n//             Meteor.subscribe(\"featured-scopes\"),\n//             Meteor.subscribe(\"featured-regions\"),\n//             Meteor.subscribe(\"featured-sitesDevices\"),\n//             Meteor.subscribe(\"featured-deviceCategory\"),\n//             Meteor.subscribe(\"featured-sitesDeviceSensors\"),\n//             Meteor.subscribe(\"featured-devices\"),\n//             Meteor.subscribe(\"featured-protocols\"),\n//             Meteor.subscribe(\"featured-sites\")\n//         ];\n//     },\n//     data : function(){\n//         return site.findOne({ _id : new Mongo.ObjectID(this.params._id)});\n//     }\n// });\n\n// Router.route(\"/map\", function(){\n//     this.render('mapIndex');\n//     this.render('header', {to: 'top'});\n//     this.render('mapIndex', {to: 'content'});\n// },{\n//     name : \"mapIndex\",\n//     loadingTemplate : \"loading\",\n//     onBeforeAction : function(){\n//         Session.set('currentRoute', 'mapIndex');\n//         this.next();\n//     },\n//     waitOn : function(){\n//         return [\n// //             Meteor.subscribe(\"featured-sites\"),\n// //             Meteor.subscribe(\"featured-sitesDevices\"),\n//             // Meteor.subscribe(\"featured-activeDevices\"),\n//             // Meteor.subscribe(\"featured-statusLink\"),\n//             // Meteor.subscribe(\"featured-alarmDevices\")\n//         ];\n//     }\n// });\n\n// Router.route(\"/alarm\", {\n//     name : \"alarmIndex\",\n//     onBeforeAction : function(){\n//         Session.set('currentRoute', 'alarmIndex');\n//         this.next();\n//     }\n// });\n","// ApplicationController = RouteController.extend({\n//   layoutTemplate: 'defaultTemplate',\n//   onBeforeAction: function () {\n//       // do some login checks or other custom logic\n//     if (!Meteor.userId()) {\n//         this.render('loginIndex');\n//     } else {\n//         this.next();\n//     }\n//   }\n// });\n\nRouter.configure({\n    loadingTemplate: 'loading',\n    notFoundTemplate : 'notFound',\n    layoutTemplate: 'defaultTemplate'\n})\n","Router.route(\"/login\", {\n    loadingTemplate : \"loading\",\n    layoutTemplate : \"loginIndex\",\n    name : \"loginIndex\"\n});\n","/**\n * Generate set admin accounts\n */\n\ngenerateTestAccounts = function(){\n    // Create an array of user accounts\n    var users = [\n       {name : 'admin', email : 'ahmad.subarkah@cudocomm.com', password : 'password'},\n        {name : 'admin2', email : 'cudocudo@cudocomm.com', password : 'password2'},\n        {name : 'admin3', email : 'cudocudo2@cudocomm.com', password : 'password3'},\n        {name : 'scm_denpasarivm', email : 'scm@denpasarivm.com', password : 'denpasarivm123'},\n        {name : 'scm_denpasarsctv', email : 'scm@denpasarsctv.com', password : 'denpasarsctv123'},\n        {name : 'scm_pacitan', email : 'scm@pacitan.com', password : 'pacitan123'},\n        {name : 'scm_situbondo', email : 'scm@situbondo.com', password : 'situbondo123'},\n        {name : 'scm_surabayaivm', email : 'scm@surabayaivm.com', password : 'surabayaivm123'},\n        {name : 'scm_surabayasctv', email : 'scm@surabayasctv.com', password : 'surabayasctv123'},\n        {name : 'scm_bandungbackup', email : 'scm@bandungbackup.com', password : 'bandungbackup123'},\n        {name : 'scm_bandungmain', email : 'scm@bandungmain.com', password : 'bandungmain123'},\n        {name : 'scm_jalanpanjang', email : 'scm@jalanpanjang.com', password : 'jalanpanjang123'},\n        {name : 'scm_kebonjeruk', email : 'scm@kebonjeruk.com', password : 'kebonjeruk123'},\n        {name : 'scm_semarangivm', email : 'scm@semarangivm.com', password : 'semarangivm123'},\n        {name : 'scm_semarangsctv', email : 'scm@semarangsctv.com', password : 'semarangsctv123'},\n        {name : 'scm_yogyakartaivm', email : 'scm@yogyakartaivm.com', password : 'yogyakartaivm'},\n        {name : 'scm_yogyakartasctv', email : 'scm@yogyakartasctv.com', password : 'yogyakartasctv123'}\n    ];\n\n    // loop through array of user accounts\n    for(i=0; i<users.length; i++){\n        // check if the users already exists in the db\n        var userEmail = users[i].email,\n            checkUser = Meteor.users.findOne({\"emails.address\" : userEmail});\n\n        // if an existing user is not found, create the accounts\n        if(!checkUser){\n            var user = Accounts.createUser({\n                username : users[i].name,\n                email : userEmail,\n                password : users[i].password,\n                profile : {\n                    name : users[i].name\n                }\n            })\n        }\n    }\n}\n","Meteor.startup(function(){\n    generateTestAccounts();\n})\n","Meteor.publish(\"featured-regions\",function(){\n    return m_region.featured();\n});\n\nMeteor.publish(\"featured-scopes\",function(){\n    return scope.featured();\n});\n\nMeteor.publish(\"featured-sites\",function(){\n    return site.featured();\n});\n\nMeteor.publish(\"featured-deviceCategory\",function(){\n    return m_device_category.featured();\n});\n\nMeteor.publish(\"featured-sitesDevices\",function(){\n    return site_device.featured();\n});\n\nMeteor.publish(\"featured-sitesDeviceSensors\",function(){\n    return site_device_sensor.featured();\n});\n\nMeteor.publish(\"featured-devices\", function(){\n    return m_device.featured();\n});\n\nMeteor.publish(\"featured-protocols\", function(){\n    return m_protocol.featured();\n});\n\n// Meteor.publish(\"featured-sitelog\",function(data_devID){\n//     check(data_devID, [Match.Any]);\n//     return sitelog.find({ dev_id : { $in : data_devID } }, { sort: { _id : -1 } });\n// });\n\n//tambahan subs 2018-09-06:\nMeteor.publish('featured-activeDevices', function() {\n    return active_device.featured();\n});\n\nMeteor.publish('featured-statusLink', function() {\n    return status_link.featured();\n});\n\nMeteor.publish('featured-alarmDevices', function() {\n    return alarm_device.featured();\n});\n\nMeteor.publish('featured-dashboardTxGraph', function() {\n    return dashboard_tx_graph.featured();\n});\n\nMeteor.publish('featured-dashboardTempGraph', function() {\n    return dashboard_temp_graph.featured();\n});\n\nMeteor.publish('featured-listCamera', function() {\n    return list_camera.featured();\n});\n\nMeteor.publish(\"featured-battery-parsed\",function(){\n    return battery_parsed.featured();\n});\n\n// Meteor.publish('featured-listCamera', function(data_devID) {\n//     check(data_devID, [Match.Any]);\n//     return list_camera.find({ dev_id : { $in : data_devID }}, { sort: { file : -1 } });\n// });\n\n// Meteor.publish(\"featured-sitelog\",function(data_devID){\n//     check(data_devID, [Match.Any]);\n//     return sitelog.find({ dev_id : { $in : data_devID } }, { sort: { _id : -1 } });\n// });\n\n\n// Meteor.publish(\"featuredSitelog\",function(args){\n//     check(args, Object);\n//\n//     var siteList = site_device.find({site_id : args._site_id, device_id : args._device_id }).fetch();\n//     var z = _.indexBy(siteList, 'dev_id');\n//     var devId = [];\n//     _.map(z, function(value, key){\n//         // devId.push(parseInt(key));\n//         // return sitelog.oneLast(parseInt(key));\n//         // return sitelog.findOne({ dev_id : parseInt(key) }, { sort: { createdOn : -1 } } );\n//         var d = sitelog.findOne({ dev_id : parseInt(key) }, { sort: { createdOn : -1 } } );\n//         if(typeof d !== 'undefined'){\n//             // console.log(d);\n//             return d;\n//         }\n//     })\n//     // return sitelog.oneLast();\n//\n//     // return sitelog.findOne({ dev_id : 255 }, { sort: { createdOn : -1 } } );\n//     // console.log(devId);\n//     // return sitelog.findOne({ dev_id : {} }, { sort: { createdOn : -1 } } );\n// });\n","// ==============================================================================//\n// IMPORT MODULE //\n// ==============================================================================//\nimport { Meteor } from 'meteor/meteor';\nimport express from 'express';\nimport bodyParser from 'body-parser';\n\n// ==============================================================================//\n// CREATE ROUTES & HTTP REQUEST FUNCTION EXPORT //\n// ==============================================================================//\nexport function imageServe() {\n  const app = express();\n  app.use(bodyParser.urlencoded({ extended: false }));\n  // app.use('/camera', express.static( `/var/www/nms2/nms_v2/fe/public/camera/` ) );\n  app.use('/camera', express.static( `/home/nms2/public/` ) );\n  /* Create WebApp API handler */\n  WebApp.connectHandlers.use(app);\n}","// setup local CORS for Cordova testing\nBrowserPolicy.content.allowOriginForAll(\"meteor.local\");\nBrowserPolicy.content.allowOriginForAll(\"*.openstreetmap.org\");\nBrowserPolicy.content.allowOriginForAll(\"nms.scm.co.id\");\nBrowserPolicy.content.allowOriginForAll(\"stamen-tiles-a.a.ssl.fastly.net\");\nBrowserPolicy.content.allowOriginForAll(\"stamen-tiles-b.a.ssl.fastly.net\");\nBrowserPolicy.content.allowOriginForAll(\"stamen-tiles-c.a.ssl.fastly.net\");\nBrowserPolicy.content.allowOriginForAll(\"stamen-tiles-d.a.ssl.fastly.net\");\n","import {imageServe} from './api/serveImage';\n\n// marker collection\nvar Markers = new Meteor.Collection('markers');\nMeteor.publish(\"markers\", function () {\n  return Markers.find();\n});\n\n// Listen to incoming HTTP requests, can only be used on the server\nWebApp.connectHandlers.use(function(req, res, next) {\n  res.setHeader(\"Access-Control-Allow-Origin\", \"*\");\n  return next();\n});\n\n\nif (Meteor.isServer) {\n  imageServe();\n}\n\n"]}